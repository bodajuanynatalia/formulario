<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Boda de Juan & Natalia — 27 de junio de 2026</title>
  <meta name="description" content="Confirma tu asistencia a la boda de Juan & Natalia (Comillas, 27 de junio de 2026)." />

  <meta property="og:title" content="Boda de Juan & Natalia — 27 de junio de 2026" />
  <meta property="og:description" content="Confirma tu asistencia a la boda de Juan & Natalia (Comillas)." />
  <meta property="og:image" content="preview.jpg" />
  <meta name="twitter:card" content="summary_large_image" />
  <link rel="icon" type="image/x-icon" href="favicon.ico" />

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Playfair+Display:wght@400;500;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#f7f5f2; --text:#1f2328; --muted:#5f5c56; --gold:#c7a66a; --line:#e8e2d9; --card:#ffffffee;
      --radius:20px; --shadow:0 18px 36px rgba(0,0,0,.12);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--text);
      font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(900px 500px at 10% -5%, rgba(199,166,106,.06), transparent 60%),
        radial-gradient(1100px 700px at 120% 10%, rgba(181,143,79,.05), transparent 60%),
        var(--bg);
      padding-bottom:140px; /* espacio para los botones flotantes */
    }
    .wrap{max-width:820px;margin:0 auto;padding:22px}

    header{text-align:center;margin-bottom:10px}
    .title{font-family:'Playfair Display',serif;font-weight:700;letter-spacing:.3px;font-size:44px;margin:0 0 6px}
    .sub{color:#3a3f45;margin:0 0 12px}
    .countdown{display:flex;gap:10px;justify-content:center}
    .pill{background:#fff;border:1px solid var(--line);border-radius:999px;padding:8px 12px;font-weight:700}

    /* HERO */
    .hero{display:flex;justify-content:center;margin:18px 0 16px}
    .hero img{width:min(900px,96%);border-radius:26px;border:1px solid var(--line);box-shadow:var(--shadow);
      filter:saturate(.9) contrast(.98) brightness(1.02);}

    .card{background:var(--card);border:1px solid var(--line);border-radius:var(--radius);box-shadow:var(--shadow);padding:22px}
    h2{font-family:'Playfair Display',serif;font-size:26px;margin:0 0 10px}
    label{font-weight:600;color:#2d2a25;font-size:14px;margin-bottom:6px;display:block}
    /* Forced single column on all sizes */
    .grid{display:grid;grid-template-columns:1fr;gap:16px}
    input,textarea{width:100%;border:1px solid #dcd5c8;border-radius:14px;padding:12px 14px;font-size:15px;background:#fff}
    textarea{min-height:110px;resize:vertical}
    .hint{font-size:12px;color:#6b6459;margin-top:6px}
    .hidden{display:none}

    /* Segmented button groups */
    .seg{display:flex;gap:10px;flex-wrap:wrap}
    .seg .btn{appearance:none;border:1.5px solid #dcd5c8;background:#fff;color:#2d2a25;padding:10px 14px;border-radius:999px;font-weight:700;cursor:pointer}
    .seg .btn.active{border-color:var(--gold); box-shadow:0 0 0 3px rgba(199,166,106,.18)}

    .send{display:flex;justify-content:center;margin-top:8px;gap:12px;flex-wrap:wrap}
    .btn-primary{background:#fff;border:1.5px solid var(--gold);color:#6b542a;border-radius:999px;padding:12px 22px;font-weight:800;letter-spacing:.2px;cursor:pointer;box-shadow:0 2px 0 rgba(181,143,79,.25)}
    .btn-secondary{background:transparent;border:1px solid #dcd5c8;color:#2d2a25;border-radius:999px;padding:12px 22px;font-weight:700;cursor:pointer}

    /* Floating RSVP: only circles, no bar */
    .floating-rsvp{position:fixed;left:0;right:0;bottom:16px;z-index:999;pointer-events:none}
    .floating-inner{display:flex;gap:14px;justify-content:center;align-items:center;pointer-events:auto}
    .rbtn{width:110px;height:110px;border-radius:50%;background:#fff;border:1.5px solid var(--gold);color:#6b542a;font-weight:800;letter-spacing:.2px;
      box-shadow:0 14px 26px rgba(0,0,0,.12), inset 0 2px 8px rgba(255,255,255,.85), inset 0 -3px 8px rgba(0,0,0,.05);
      cursor:pointer;transition:transform .1s ease, box-shadow .2s}
    .rbtn:hover{transform:translateY(-2px)}
    .rbtn.active{outline:3px solid rgba(199,166,106,.35)}

    /* Bottom finca photo */
    .showcase{margin:22px auto 8px;display:flex;justify-content:center}
    .showcase img{width:min(820px,96%);border-radius:22px;border:1px solid var(--line);box-shadow:var(--shadow)}

    .footer{text-align:center;color:#7a746b;margin:12px 0 18px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1 class="title">Boda de Juan & Natalia</h1>
      <p class="sub">Sábado <strong>27 de junio de 2026</strong> · Comillas</p>
      <div class="countdown" aria-live="polite">
        <span class="pill"><b id="dd">--</b> días</span>
        <span class="pill"><b id="hh">--</b> h</span>
        <span class="pill"><b id="mm">--</b> m</span>
        <span class="pill"><b id="ss">--</b> s</span>
      </div>
    </header>

    <!-- Minimal hero with new birds image -->
    <div class="hero">
      <img src="pajaritos.jpg" alt="Ilustración — dos pajaritos">
    </div>

    <main class="card" aria-labelledby="rsvp-title">
      <h2 id="rsvp-title">Confirma tu asistencia</h2>
      <p style="margin:0 0 10px;color:var(--muted)">Selecciona tu opción (abajo) y completa tus datos.</p>

      <form id="rsvp" action="https://script.google.com/macros/s/AKfycbyBvoPHWbOIgCyp1lKgObxo2yvplq-pgs9T2NyE1shO4WTTQ3q_ckkYrCaepe3QMFIf/exec" method="POST" novalidate>
        <input class="hidden" type="text" name="_gotcha" tabindex="-1" autocomplete="off" />
        <input class="hidden" type="text" name="asistencia" id="asistencia" />

        <div class="grid">
          <div>
            <label>Nombre y apellidos <span style="color:#a83b3b">*</span></label>
            <input type="text" name="nombre" required placeholder="Tu nombre completo" />
          </div>
          <div>
            <label>Email <span style="color:#a83b3b">*</span></label>
            <input type="email" name="email" required placeholder="tucorreo@email.com" />
          </div>
          <div>
            <label>Teléfono</label>
            <input type="tel" name="telefono" inputmode="tel" placeholder="+34 6XX XX XX XX" />
          </div>

          <div>
            <label>Acompañante</label>
            <div class="seg" id="seg-acomp">
              <button type="button" class="btn" data-val="no">No</button>
              <button type="button" class="btn" data-val="si-1">Sí (1)</button>
            </div>
            <input type="hidden" name="acompanante" id="acompanante" />
          </div>

          <div id="nombreAcompananteWrap" class="hidden">
            <label>Nombre del acompañante</label>
            <input type="text" name="nombre_acompanante" placeholder="Nombre y apellidos" />
          </div>

          <div>
            <label>Niños</label>
            <div class="seg" id="seg-ninos">
              <button type="button" class="btn" data-val="no">No</button>
              <button type="button" class="btn" data-val="si">Sí</button>
            </div>
            <input type="hidden" name="ninos" id="ninos" />
          </div>

          <div id="numNinosWrap" class="hidden">
            <label>Número de niños</label>
            <div class="seg" id="seg-num">
              <button type="button" class="btn" data-val="1">1</button>
              <button type="button" class="btn" data-val="2">2</button>
              <button type="button" class="btn" data-val="3">3</button>
              <button type="button" class="btn" data-val="4">4</button>
            </div>
            <input type="hidden" name="num_ninos" id="num_ninos" />
          </div>

          <div>
            <label>Intolerancias o alergias</label>
            <input type="text" name="intolerancias" placeholder="Ej.: sin gluten, sin lácteos…" />
          </div>
          <div>
            <label>Comentarios</label>
            <textarea name="comentarios" placeholder="Cuéntanos cualquier detalle que debamos tener en cuenta"></textarea>
          </div>
          <div>
            <label><input type="checkbox" name="consent" required /> Acepto que mis datos se usen solo para la organización de la boda.</label>
            <div class="hint">Contacto: <a href="mailto:juangumar1@gmail.com">juangumar1@gmail.com</a></div>
          </div>
        </div>

        <div class="send">
          <button type="submit" class="btn-primary">Enviar confirmación</button>
          <button type="reset" class="btn-secondary">Limpiar</button>
        </div>

        <!-- Bottom photo -->
        <div class="showcase">
          <img src="finca.jpg" alt="Casería de la Mar — Comillas">
        </div>

        <p id="ok" class="hidden" style="text-align:center;color:#135c39;font-weight:700">¡Gracias! Tu respuesta ha sido registrada.</p>
        <p id="fail" class="hidden" style="text-align:center;color:#7a1a1a;font-weight:700">Algo no ha ido bien. Revisa los campos o inténtalo más tarde.</p>
      </form>
    </main>

    <p class="footer">© 2026 Juan & Natalia — Con cariño</p>
  </div>

  <!-- Floating RSVP (only buttons, no bar) -->
  <div class="floating-rsvp" role="group" aria-label="Asistencia">
    <div class="floating-inner">
      <button class="rbtn" data-val="si" type="button">Asistiré</button>
      <button class="rbtn" data-val="duda" type="button">Quizá</button>
      <button class="rbtn" data-val="no" type="button">No puedo</button>
    </div>
  </div>

  <script>
    // Cuenta atrás
    const eventDate = new Date('2026-06-27T17:00:00');
    const dd = document.getElementById('dd'), hh = document.getElementById('hh'), mm = document.getElementById('mm'), ss = document.getElementById('ss');
    function tick(){
      const now = new Date();
      const delta = Math.max(0, eventDate - now);
      const s = Math.floor(delta/1000);
      const d = Math.floor(s/86400);
      const h = Math.floor((s%86400)/3600);
      const m = Math.floor((s%3600)/60);
      const sec = s%60;
      dd.textContent=d; hh.textContent=h.toString().padStart(2,'0'); mm.textContent=m.toString().padStart(2,'0'); ss.textContent=sec.toString().padStart(2,'0');
    }
    tick(); setInterval(tick, 1000);

    // RSVP floating buttons
    const asistenciaInput = document.getElementById('asistencia');
    const rbtns = document.querySelectorAll('.rbtn');
    rbtns.forEach(btn => btn.addEventListener('click', () => selectAsistencia(btn.dataset.val)));
    function selectAsistencia(v) {
      asistenciaInput.value = v;
      rbtns.forEach(b=>b.classList.toggle('active', b.dataset.val===v));
      // scroll to form title on first selection for convenience
      document.getElementById('rsvp-title').scrollIntoView({ behavior:'smooth', block:'start' });
    }

    // Segmented groups helpers
    function makeSegmented(groupId, inputId, onChange) {
      const wrap = document.getElementById(groupId);
      const input = document.getElementById(inputId);
      if(!wrap) return;
      wrap.querySelectorAll('.btn').forEach(btn => {
        btn.addEventListener('click', () => {
          input.value = btn.dataset.val;
          wrap.querySelectorAll('.btn').forEach(b => b.classList.toggle('active', b === btn));
          if(onChange) onChange(btn.dataset.val);
        });
      });
    }

    const acompWrap = document.getElementById('nombreAcompananteWrap');
    makeSegmented('seg-acomp', 'acompanante', (val) => {
      acompWrap.classList.toggle('hidden', val!=='si-1');
      if(val!=='si-1') { const f=document.getElementById('rsvp'); if(f.nombre_acompanante) f.nombre_acompanante.value=''; }
    });

    const numWrap = document.getElementById('numNinosWrap');
    makeSegmented('seg-ninos', 'ninos', (val) => {
      const show = val==='si';
      numWrap.classList.toggle('hidden', !show);
      if(!show) document.getElementById('num_ninos').value='';
    });
    makeSegmented('seg-num', 'num_ninos');

    // Form submit
    const form = document.getElementById('rsvp');
    const ok = document.getElementById('ok');
    const fail = document.getElementById('fail');

    form.addEventListener('submit', async (e)=>{
      e.preventDefault(); ok.classList.add('hidden'); fail.classList.add('hidden');
      if(!asistenciaInput.value) { alert('Selecciona tu opción: Asistiré, Quizá o No puedo'); return; }
      if(!form.checkValidity()) { form.reportValidity(); return; }
      if(form.querySelector('input[name="_gotcha"]').value) { window.location.href='gracias.html?status=spam'; return; }

      const data = new FormData(form);
      try {
        const res = await fetch(form.action, { method:'POST', body:data });
        if(res.ok) {
          const status = asistenciaInput.value;
          const name = encodeURIComponent(form.nombre.value || '');
          window.location.href = 'gracias.html?status=' + encodeURIComponent(status) + '&name=' + name;
        } else fail.classList.remove('hidden');
      } catch(err) { fail.classList.remove('hidden'); }
    });
  </script>
</body>
</html>
